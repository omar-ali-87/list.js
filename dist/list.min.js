!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).List=e()}(this,function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e,s;const i=t(function(){if(s)return e;var t,i;s=1;var r=0;function n(t){return t>=48&&t<=57}function o(t,e){for(var s=(t+="").length,o=(e+="").length,h=0,l=0;h<s&&l<o;){var a=t.charCodeAt(h),u=e.charCodeAt(l);if(n(a)){if(!n(u))return a-u;for(var c=h,f=l;48===a&&++c<s;)a=t.charCodeAt(c);for(;48===u&&++f<o;)u=e.charCodeAt(f);for(var d=c,p=f;d<s&&n(t.charCodeAt(d));)++d;for(;p<o&&n(e.charCodeAt(p));)++p;var g=d-c-p+f;if(g)return g;for(;c<d;)if(g=t.charCodeAt(c++)-e.charCodeAt(f++))return g;h=d,l=p}else{if(a!==u)return a<r&&u<r&&-1!==i[a]&&-1!==i[u]?i[a]-i[u]:a-u;++h,++l}}return h>=s&&l<o&&s>=o?-1:l>=o&&h<s&&o>=s?1:s-o}return o.caseInsensitive=o.i=function(t,e){return o((""+t).toLowerCase(),(""+e).toLowerCase())},Object.defineProperties(o,{alphabet:{get:function(){return t},set:function(e){i=[];var s=0;if(t=e)for(;s<t.length;s++)i[t.charCodeAt(s)]=s;for(r=i.length,s=0;s<r;s++)void 0===i[s]&&(i[s]=-1)}}}),e=o}()),r=function(){return function(t,e,s,i){return(i=i||{}).test&&i.test.getElementsByClassName||!i.test&&"function"==typeof document.getElementsByClassName?function(t,e,s){return s?t.getElementsByClassName(e)[0]||void 0:Array.from(t.getElementsByClassName(e))}(t,e,s||!1):i.test&&i.test.querySelector||!i.test&&"function"==typeof document.querySelector?function(t,e,s){const i="."+e;return s?t.querySelector(i)||void 0:Array.from(t.querySelectorAll(i))}(t,e,s||!1):function(t,e,s){const i=[],r=t.getElementsByTagName("*"),n=r.length,o=new RegExp("(^|\\s)"+e+"(\\s|$)");for(let h=0,l=0;h<n;h++)if(o.test(r[h].className)){if(s)return r[h];i[l]=r[h],l++}return s?void 0:i}(t,e,s||!1)}}();function n(t,...e){for(let s=0;s<e.length;s++){const i=e[s];if(i)for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t}function o(t,e){return t.indexOf(e)}function h(t){if(void 0===t)return[];if(null===t)return[null];if(t===window)return[window];if("string"==typeof t)return[t];if(function(t){return"[object Array]"===Object.prototype.toString.call(t)}(t))return t;if("number"!=typeof t.length)return[t];if("function"==typeof t&&t instanceof Function)return[t];const e=[];for(let s=0,i=t.length;s<i;s++)(Object.prototype.hasOwnProperty.call(t,s)||s in t)&&e.push(t[s]);return e.length?e:[]}const l="function"==typeof window.addEventListener?"addEventListener":"attachEvent",a="function"==typeof window.removeEventListener?"removeEventListener":"detachEvent",u="addEventListener"!==l?"on":"";const c=Object.freeze(Object.defineProperty({__proto__:null,bind:function(t,e,s,i){const r=h(t);for(let n=0,o=r.length;n<o;n++)r[n][l](u+e,s,i||!1)},debounce:function(t,e,s){let i=null;return e?function(...r){const n=this,o=s&&!i;i&&clearTimeout(i),i=setTimeout(function(){i=null,s||t.apply(n,r)},e),o&&t.apply(n,r)}:t},unbind:function(t,e,s,i){const r=h(t);for(let n=0,o=r.length;n<o;n++)r[n][a](u+e,s,i||!1)}},Symbol.toStringTag,{value:"Module"}));function f(t){return t=(t=null===(t=void 0===t?"":t)?"":t).toString()}const d=/\s+/;function p(t){return new g(t)}class g{constructor(t){if(!t||!t.nodeType)throw new Error("A DOM element reference is required");this.el=t,this.list=t.classList||null}add(t){if(this.list)return this.list.add(t),this;const e=this.array();return-1===o(e,t)&&e.push(t),this.el.className=e.join(" "),this}remove(t){if(this.list&&"string"==typeof t)return this.list.remove(t),this;const e=this.array();if("string"==typeof t){const s=o(e,t);-1!==s&&e.splice(s,1)}else if(t instanceof RegExp)for(let s=e.length-1;s>=0;s--)t.test(e[s])&&e.splice(s,1);return this.el.className=e.join(" "),this}toggle(t,e){return this.list?(void 0!==e?e!==this.list.toggle(t,e)&&this.list.toggle(t):this.list.toggle(t),this):(void 0!==e?e?this.add(t):this.remove(t):this.has(t)?this.remove(t):this.add(t),this)}array(){const t=(this.el.getAttribute("class")||"").replace(/^\s+|\s+$/g,"").split(d);return""===t[0]&&t.shift(),t}has(t){return this.list?this.list.contains(t):-1!==o(this.array(),t)}contains(t){return this.has(t)}}function m(t,e){let s=t.getAttribute&&t.getAttribute(e)||null;if(!s){const i=t.attributes,r=i.length;for(let t=0;t<r;t++)void 0!==i[t]&&i[t].nodeName===e&&(s=i[t].nodeValue)}return s}let y,v,b,A,C,w,q,E,I;return class{constructor(t,e={},s){this.listClass="list",this.searchClass="search",this.sortClass="sort",this.page=1e4,this.i=1,this.items=[],this.visibleItems=[],this.matchingItems=[],this.searched=!1,this.filtered=!1,this.searchDelay=0,this.handlers={updated:[]},this.valueNames=[],this.utils={getByClass:r,extend:n,indexOf:o,events:c,toString:f,naturalSort:i,classes:p,getAttribute:m,toArray:h},this.reset={filter:()=>{const t=this.items;let e=t.length;for(;e--;)t[e].filtered=!1;return this},search:()=>{const t=this.items;let e=t.length;for(;e--;)t[e].found=!1;return this}},y||(y=require("./item").default),v||(v=require("./add-async").default),b||(b=require("./pagination").default),A||(A=require("./parse").default),C||(C=require("./templater").default),w||(w=require("./search").default),q||(q=require("./filter").default),E||(E=require("./sort").default),I||(I=require("./fuzzy-search").default),this.init(t,e,s)}init(t,e,s){if(this.utils.extend(this,e),this.listContainer="string"==typeof t?document.getElementById(t):t,!this.listContainer)return;const i=r(this.listContainer,this.listClass,!0);if(!i)return;this.list=i;const n=b(this);this.parse=A(this),this.templater=C(this),this.search=w(this),this.filter=q(this),this.sort=E(this),this.fuzzySearch=I(this,e.fuzzySearch),this.setupHandlers(e),this.parseItems(),this.setupPagination(e,n),void 0!==s&&this.add(s),this.update()}setupHandlers(t){for(const e in this.handlers)t[e]&&Object.prototype.hasOwnProperty.call(this.handlers,e)&&this.on(e,t[e])}parseItems(){this.parse(this.list)}setupPagination(t,e){if(void 0!==t.pagination){let s=t.pagination;!0===s&&(s=[{}]),Array.isArray(s)&&void 0!==s[0]||(s=[s]);for(let t=0,i=s.length;t<i;t++)e(s[t])}}reIndex(){this.items=[],this.visibleItems=[],this.matchingItems=[],this.searched=!1,this.filtered=!1,this.parse(this.list)}toJSON(){const t=[];for(let e=0,s=this.items.length;e<s;e++)t.push(this.items[e].values());return t}add(t,e){const s=Array.isArray(t)?t:[t];if(0===s.length)return;if(e){return void require("./add-async").default(this)(s.slice(0),e)}const i=require("./item").default(this),r=[],n=this.items.length>this.page;for(let o=0,h=s.length;o<h;o++){const t=new i(s[o],void 0,n);this.items.push(t),r.push(t)}return this.update(),r}show(t,e){return this.i=t,this.page=e,this.update(),this}remove(t,e,s){let i=0;for(let r=0,n=this.items.length;r<n;r++){this.items[r].values()[t]==e&&(this.templater.remove(this.items[r],s),this.items.splice(r,1),n--,r--,i++)}return this.update(),i}get(t,e){const s=[];for(let i=0,r=this.items.length;i<r;i++){const r=this.items[i];r.values()[t]==e&&s.push(r)}return s}size(){return this.items.length}clear(){return this.templater.clear(),this.items=[],this}on(t,e){return this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e),this}off(t,e){const s=this.handlers[t];if(!s)return this;const i=o(s,e);return i>-1&&s.splice(i,1),this}trigger(t){const e=this.handlers[t];if(!e)return this;let s=e.length;for(;s--;)e[s](this);return this}update(){const t=this.items,e=t.length;this.visibleItems=[],this.matchingItems=[],this.templater.clear();for(let s=0;s<e;s++)t[s].matching()&&this.matchingItems.length+1>=this.i&&this.visibleItems.length<this.page?(t[s].show(),this.visibleItems.push(t[s]),this.matchingItems.push(t[s])):t[s].matching()?(this.matchingItems.push(t[s]),t[s].hide()):t[s].hide();return this.trigger("updated"),this}}});
//# sourceMappingURL=list.min.js.map
